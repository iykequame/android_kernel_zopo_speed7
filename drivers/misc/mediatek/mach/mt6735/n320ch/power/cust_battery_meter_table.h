#ifndef _CUST_BATTERY_METER_TABLE_H
#define _CUST_BATTERY_METER_TABLE_H

#include <mach/mt_typedefs.h>

// ============================================================
// define
// ============================================================
#define BAT_NTC_10 1
#define BAT_NTC_47 0

#if (BAT_NTC_10 == 1)
#define RBAT_PULL_UP_R             16900	
//#define RBAT_PULL_DOWN_R		   27000	
#endif

#if (BAT_NTC_47 == 1)
#define RBAT_PULL_UP_R             61900	
//#define RBAT_PULL_DOWN_R		  100000	
#endif
#define RBAT_PULL_UP_VOLT          1800



// ============================================================
// ENUM
// ============================================================

// ============================================================
// structure
// ============================================================

// ============================================================
// typedef
// ============================================================
typedef struct _BATTERY_PROFILE_STRUC
{
    kal_int32 percentage;
    kal_int32 voltage;
} BATTERY_PROFILE_STRUC, *BATTERY_PROFILE_STRUC_P;

typedef struct _R_PROFILE_STRUC
{
    kal_int32 resistance; // Ohm
    kal_int32 voltage;
} R_PROFILE_STRUC, *R_PROFILE_STRUC_P;

typedef enum
{
    T1_0C,
    T2_25C,
    T3_50C
} PROFILE_TEMPERATURE;

// ============================================================
// External Variables
// ============================================================

// ============================================================
// External function
// ============================================================

// ============================================================
// <DOD, Battery_Voltage> Table
// ============================================================
#if (BAT_NTC_10 == 1)
    BATT_TEMPERATURE Batt_Temperature_Table[] = {
        {-20,68237},
        {-15,53650},
        {-10,42506},
        { -5,33892},
        {  0,27219},
        {  5,22021},
        { 10,17926},
        { 15,14674},
        { 20,12081},
        { 25,10000},
        { 30,8315},
        { 35,6948},
        { 40,5834},
        { 45,4917},
        { 50,4161},
        { 55,3535},
        { 60,3014}
    };
#endif

#if (BAT_NTC_47 == 1)
    BATT_TEMPERATURE Batt_Temperature_Table[] = {
        {-20,483954},
        {-15,360850},
        {-10,271697},
        { -5,206463},
        {  0,158214},
        {  5,122259},
        { 10,95227},
        { 15,74730},
        { 20,59065},
        { 25,47000},
        { 30,37643},
        { 35,30334},
        { 40,24591},
        { 45,20048},
        { 50,16433},
        { 55,13539},
        { 60,11210}        
    };
#endif

// T0 -10C
BATTERY_PROFILE_STRUC battery_profile_t0[] =
{
	{0,4303},
	{1,4266},
	{3,4238},
	{5,4215},
	{7,4195},
	{8,4177},
	{10,4160},
	{12,4143},
	{14,4126},
	{16,4109},
	{17,4096},
	{19,4084},
	{21,4069},
	{23,4051},
	{24,4031},
	{26,4011},
	{28,3994},
	{30,3980},
	{32,3966},
	{33,3952},
	{35,3939},
	{37,3925},
	{39,3912},
	{41,3899},
	{42,3887},
	{44,3876},
	{46,3866},
	{48,3857},
	{49,3849},
	{51,3841},
	{53,3834},
	{55,3827},
	{57,3821},
	{58,3816},
	{60,3811},
	{62,3805},
	{64,3801},
	{66,3797},
	{67,3793},
	{69,3790},
	{71,3787},
	{73,3784},
	{74,3780},
	{76,3777},
	{78,3772},
	{80,3766},
	{82,3761},
	{83,3753},
	{85,3745},
	{87,3735},
	{89,3726},
	{91,3717},
	{92,3710},
	{93,3707},
	{94,3705},
	{95,3704},
	{95,3702},
	{96,3701},
	{96,3700},
	{96,3699},
	{97,3699},
	{97,3698},
	{97,3697},
	{98,3697},
	{98,3696},
	{98,3696},
	{98,3695},
	{98,3695},
	{99,3695},
	{99,3694},
	{99,3694},
	{99,3694},
	{99,3698},
	{100,3400}
};

// T1 0C
BATTERY_PROFILE_STRUC battery_profile_t1[] =
{
	{0,4321},
	{1,4294},
	{3,4274},
	{4,4256},
	{6,4238},
	{7,4221},
	{9,4205},
	{11,4187},
	{12,4171},
	{14,4155},
	{15,4139},
	{17,4124},
	{19,4108},
	{20,4094},
	{22,4081},
	{23,4068},
	{25,4051},
	{26,4032},
	{28,4013},
	{30,3999},
	{31,3985},
	{33,3972},
	{34,3960},
	{36,3947},
	{38,3934},
	{39,3920},
	{41,3906},
	{42,3892},
	{44,3879},
	{45,3869},
	{47,3859},
	{49,3851},
	{50,3843},
	{52,3836},
	{53,3829},
	{55,3824},
	{57,3817},
	{58,3812},
	{60,3806},
	{61,3801},
	{63,3797},
	{64,3792},
	{66,3788},
	{68,3785},
	{69,3782},
	{71,3779},
	{72,3777},
	{74,3772},
	{76,3768},
	{77,3763},
	{79,3757},
	{80,3747},
	{82,3737},
	{83,3726},
	{85,3713},
	{87,3704},
	{88,3699},
	{90,3696},
	{91,3693},
	{93,3689},
	{95,3677},
	{96,3641},
	{98,3570},
	{98,3542},
	{99,3527},
	{99,3517},
	{99,3510},
	{99,3503},
	{99,3497},
	{99,3493},
	{99,3489},
	{99,3485},
	{99,3482},
	{100,3400}
};

// T2 25C
BATTERY_PROFILE_STRUC battery_profile_t2[] =
{
	{0,4338},
	{1,4317},
	{3,4298},
	{4,4281},
	{6,4264},
	{7,4246},
	{9,4230},
	{10,4213},
	{12,4197},
	{13,4181},
	{15,4165},
	{16,4149},
	{18,4133},
	{19,4118},
	{21,4103},
	{23,4088},
	{24,4076},
	{26,4062},
	{27,4046},
	{29,4030},
	{30,4014},
	{32,4000},
	{33,3987},
	{35,3976},
	{36,3964},
	{38,3953},
	{39,3941},
	{41,3927},
	{43,3912},
	{44,3896},
	{46,3881},
	{47,3870},
	{49,3859},
	{50,3851},
	{52,3843},
	{53,3836},
	{55,3829},
	{56,3823},
	{58,3817},
	{59,3811},
	{61,3806},
	{62,3801},
	{64,3796},
	{66,3791},
	{67,3787},
	{69,3783},
	{70,3780},
	{72,3776},
	{73,3772},
	{75,3768},
	{76,3761},
	{78,3753},
	{79,3745},
	{81,3737},
	{82,3725},
	{84,3712},
	{86,3697},
	{87,3689},
	{89,3687},
	{90,3685},
	{92,3684},
	{93,3681},
	{95,3668},
	{96,3617},
	{98,3538},
	{99,3420},
	{100,3307},
	{100,3287},
	{100,3287},
	{100,3287},
	{100,3287},
	{100,3287},
	{100,3287},
	{100,3287}
};

// T3 50C
BATTERY_PROFILE_STRUC battery_profile_t3[] =
{
	{0,4344},
	{1,4326},
	{3,4308},
	{4,4292},
	{6,4275},
	{7,4257},
	{9,4241},
	{10,4224},
	{12,4207},
	{13,4191},
	{15,4174},
	{16,4158},
	{18,4143},
	{19,4127},
	{21,4112},
	{22,4096},
	{24,4081},
	{26,4068},
	{27,4054},
	{29,4039},
	{30,4024},
	{32,4011},
	{33,3997},
	{35,3985},
	{36,3974},
	{38,3961},
	{39,3949},
	{41,3937},
	{42,3923},
	{44,3908},
	{46,3891},
	{47,3877},
	{49,3865},
	{50,3856},
	{52,3849},
	{53,3840},
	{55,3833},
	{56,3827},
	{58,3820},
	{59,3814},
	{61,3807},
	{62,3802},
	{64,3797},
	{65,3791},
	{67,3787},
	{68,3782},
	{70,3775},
	{72,3766},
	{73,3757},
	{75,3750},
	{76,3744},
	{78,3739},
	{79,3731},
	{81,3725},
	{82,3717},
	{84,3702},
	{85,3689},
	{87,3677},
	{88,3675},
	{90,3674},
	{91,3671},
	{93,3668},
	{95,3659},
	{96,3615},
	{98,3546},
	{99,3442},
	{100,3266},
	{100,3247},
	{100,3241},
	{100,3239},
	{100,3237},
	{100,3236},
	{100,3235},
	{100,3235}
};

// battery profile for actual temperature. The size should be the same as T1, T2 and T3
BATTERY_PROFILE_STRUC battery_profile_temperature[] =
{
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 }
};
// T0 -10C
R_PROFILE_STRUC r_profile_t0[] =
{
	{193,4303},
	{575,4266},
	{612,4238},
	{640,4215},
	{657,4195},
	{672,4177},
	{687,4160},
	{695,4143},
	{702,4126},
	{705,4109},
	{720,4096},
	{730,4084},
	{742,4069},
	{752,4051},
	{765,4031},
	{772,4011},
	{782,3994},
	{790,3980},
	{795,3966},
	{797,3952},
	{797,3939},
	{800,3925},
	{802,3912},
	{800,3899},
	{805,3887},
	{812,3876},
	{815,3866},
	{822,3857},
	{832,3849},
	{842,3841},
	{852,3834},
	{862,3827},
	{872,3821},
	{885,3816},
	{897,3811},
	{905,3805},
	{915,3801},
	{927,3797},
	{945,3793},
	{962,3790},
	{982,3787},
	{1007,3784},
	{1032,3780},
	{1057,3777},
	{1077,3772},
	{1100,3766},
	{1130,3761},
	{1150,3753},
	{1172,3745},
	{1195,3735},
	{1220,3726},
	{1245,3717},
	{1272,3710},
	{1267,3707},
	{1262,3705},
	{1260,3704},
	{1255,3702},
	{1255,3701},
	{1250,3700},
	{1247,3699},
	{1247,3699},
	{1247,3698},
	{1242,3697},
	{1245,3697},
	{1240,3696},
	{1242,3696},
	{1240,3695},
	{1237,3695},
	{1242,3695},
	{1237,3694},
	{1235,3694},
	{1235,3694},
	{1245,3698},
	{502,3400}
};

// T1 0C
R_PROFILE_STRUC r_profile_t1[] =
{
	{180,4321},
	{295,4294},
	{305,4274},
	{310,4256},
	{312,4238},
	{317,4221},
	{320,4205},
	{322,4187},
	{325,4171},
	{332,4155},
	{335,4139},
	{345,4124},
	{345,4108},
	{350,4094},
	{355,4081},
	{365,4068},
	{372,4051},
	{377,4032},
	{377,4013},
	{385,3999},
	{385,3985},
	{387,3972},
	{390,3960},
	{390,3947},
	{390,3934},
	{385,3920},
	{382,3906},
	{375,3892},
	{372,3879},
	{375,3869},
	{377,3859},
	{382,3851},
	{385,3843},
	{392,3836},
	{397,3829},
	{407,3824},
	{410,3817},
	{420,3812},
	{422,3806},
	{432,3801},
	{440,3797},
	{445,3792},
	{452,3788},
	{462,3785},
	{477,3782},
	{490,3779},
	{510,3777},
	{525,3772},
	{540,3768},
	{557,3763},
	{575,3757},
	{582,3747},
	{597,3737},
	{615,3726},
	{622,3713},
	{640,3704},
	{657,3699},
	{690,3696},
	{725,3693},
	{777,3689},
	{827,3677},
	{862,3641},
	{902,3570},
	{857,3542},
	{817,3527},
	{795,3517},
	{777,3510},
	{757,3503},
	{745,3497},
	{737,3493},
	{722,3489},
	{717,3485},
	{710,3482},
	{502,3400}
};

// T2 25C
R_PROFILE_STRUC r_profile_t2[] =
{
	{128,4338},
	{122,4317},
	{120,4298},
	{120,4281},
	{117,4264},
	{115,4246},
	{117,4230},
	{117,4213},
	{120,4197},
	{120,4181},
	{122,4165},
	{125,4149},
	{125,4133},
	{130,4118},
	{132,4103},
	{135,4088},
	{140,4076},
	{142,4062},
	{147,4046},
	{150,4030},
	{152,4014},
	{157,4000},
	{160,3987},
	{165,3976},
	{170,3964},
	{170,3953},
	{172,3941},
	{170,3927},
	{160,3912},
	{150,3896},
	{142,3881},
	{140,3870},
	{135,3859},
	{135,3851},
	{137,3843},
	{137,3836},
	{140,3829},
	{142,3823},
	{142,3817},
	{142,3811},
	{145,3806},
	{147,3801},
	{147,3796},
	{150,3791},
	{155,3787},
	{155,3783},
	{157,3780},
	{160,3776},
	{160,3772},
	{157,3768},
	{155,3761},
	{150,3753},
	{147,3745},
	{147,3737},
	{142,3725},
	{142,3712},
	{142,3697},
	{137,3689},
	{142,3687},
	{147,3685},
	{162,3684},
	{175,3681},
	{185,3668},
	{187,3617},
	{210,3538},
	{245,3420},
	{267,3307},
	{217,3287},
	{217,3287},
	{217,3287},
	{217,3287},
	{217,3287},
	{217,3287},
	{217,3287}
};

// T3 50C
R_PROFILE_STRUC r_profile_t3[] =
{
	{115,4344},
	{82,4326},
	{82,4308},
	{85,4292},
	{87,4275},
	{85,4257},
	{87,4241},
	{87,4224},
	{85,4207},
	{87,4191},
	{85,4174},
	{87,4158},
	{90,4143},
	{90,4127},
	{90,4112},
	{90,4096},
	{92,4081},
	{97,4068},
	{97,4054},
	{95,4039},
	{95,4024},
	{100,4011},
	{100,3997},
	{100,3985},
	{105,3974},
	{105,3961},
	{110,3949},
	{112,3937},
	{112,3923},
	{107,3908},
	{95,3891},
	{92,3877},
	{87,3865},
	{85,3856},
	{90,3849},
	{87,3840},
	{87,3833},
	{90,3827},
	{90,3820},
	{95,3814},
	{92,3807},
	{95,3802},
	{97,3797},
	{97,3791},
	{102,3787},
	{102,3782},
	{100,3775},
	{95,3766},
	{92,3757},
	{92,3750},
	{92,3744},
	{95,3739},
	{90,3731},
	{95,3725},
	{95,3717},
	{90,3702},
	{92,3689},
	{92,3677},
	{92,3675},
	{97,3674},
	{97,3671},
	{102,3668},
	{107,3659},
	{110,3615},
	{122,3546},
	{127,3442},
	{167,3266},
	{117,3247},
	{105,3241},
	{100,3239},
	{95,3237},
	{92,3236},
	{90,3235},
	{90,3235}
};

// r-table profile for actual temperature. The size should be the same as T1, T2 and T3
R_PROFILE_STRUC r_profile_temperature[] =
{
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 }
};    

// ============================================================
// function prototype
// ============================================================
int fgauge_get_saddles(void);
BATTERY_PROFILE_STRUC_P fgauge_get_profile(kal_uint32 temperature);

int fgauge_get_saddles_r_table(void);
R_PROFILE_STRUC_P fgauge_get_profile_r_table(kal_uint32 temperature);

#endif	//#ifndef _CUST_BATTERY_METER_TABLE_H

